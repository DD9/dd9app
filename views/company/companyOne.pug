extends ../index/layout

block content
  .container
    .row
      .col
        h2.company-title.d-inline #{company.name}
        if company.status === "active"
          button#editCompanyBtn.company-one-title-btn.btn.btn-primary(type='button', data-toggle='modal', data-target='#editCompanyModal') Edit
          form#activateCompanyForm.form.d-inline(action=`/company/${company._id}/activate` method="POST")
            button#activateCompanyBtn.company-one-title-btn.btn.btn-primary.d-none(type='submit') Activate
        else
          form#activateCompanyForm.form.d-inline(action=`/company/${company._id}/activate` method="POST")
            button#activateCompanyBtn.company-one-title-btn.btn.btn-primary(type='submit') Activate
          button#editCompanyBtn.company-one-title-btn.btn.btn-primary.d-none(type='button', data-toggle='modal', data-target='#editCompanyModal') Edit

    .my-3.py-3.px-3.bg-white.rounded.box-shadow
      table#companyOneTable.table.table-sm.w-100
        thead.thead-light
          th.company-one-th-date-opened Date Opened
          th.company-one-th-date-closed Date Closed
          th.company-one-th-email Title
          th.company-one-th-company Hours
          th.company-one-th-name.hidden-hours-text-color Hidden Hours
        each hourLog in hourLogs
          tr
            td= h.YYYYMMDD(hourLog.dateOpened)
            td= (h.YYYYMMDD(hourLog.dateClosed) === "1970-01-01") ? '' : h.YYYYMMDD(hourLog.dateClosed)
            td: a(href=`/hourLog/${hourLog._id}`)
              if (hourLog.totalSubmittedHours > 0)
                | <b>#{hourLog.title}*</b>
              else
                | #{hourLog.title}
            td= hourLog.totalPublicHours
            td.hidden-hours-text-color= hourLog.totalHiddenHours

  #editCompanyModal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='editCompanyModal', aria-hidden='true')
    .modal-dialog(role='document')
      .modal-content
        .modal-header
          h5.modal-title Edit: #{company.name}
          button.close(type='button', data-dismiss='modal', aria-label='Close')
            span(aria-hidden='true') Ã—
        .modal-body
          form#editCompanyForm.form(action=`/company/${company._id}/edit` method="POST" novalidate)
            .form-group
              label.col-form-label(for='companyName') Name
              input#companyName.form-control(name='name' type='text' value=company.name required maxlength="50")
              .invalid-feedback Invalid form.
              .companies-json.d-none
                each company in companies
                  p #{company.name}
          form#deactivateCompanyForm.form.d-inline(action=`/company/${company._id}/deactivate` method="POST")
            button.btn-secondary.mt-3.btn.btn-block(type='submit') Deactivate
        .modal-footer
          button.btn.btn-secondary(type='button' data-dismiss='modal') Close
          button.btn.btn-primary(form='editCompanyForm') Submit